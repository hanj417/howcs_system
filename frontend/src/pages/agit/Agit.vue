<template>
  <div>
    <div>
      <div class="page-intro">
        <img
          src="~assets/img/agit_background_image.png"
          class="section__background-image" >

        <div class="title--emphasized">
          다음세대를 살아갈 하늘빛 닮은 우리 아이들 누구에게나 열린 안전한 공간<br>
          하나님이 사랑하신 것처럼 as God love it

        </div>

      </div>

      <div class="container">
        <div class="page-name">
          아지트
        </div>

        <hr class="page-name--bottom-border" >
      </div>

      <div class="visible-xs">
        <img
          src="~assets/img/agit1.png"
          class="full-width" >

        <div class="container">
          <!-- <div class="title">
        하우 아지트
      </div> -->

          <div class="normal-text">

            아지트는 어원적으로는 ‘은신처, 근거지’ 등의 의미를 가지는 러시아어 ‘agitpunkt’에서 나온 말로 영어로는 ‘a safe house’, ‘a hiding place’ 등으로 표현할 수 있습니다. 따라서 하우아지트는 다음세대를 살아갈 하늘빛 닮은 우리 아이들 누구에게나 열린 안전한 교육공간입니다.

            아지트는 <span class="intro__vision--emphasized">a</span>s <span class="intro__vision--emphasized">G</span>od love <span class="intro__vision--emphasized">it</span> (하나님이 사랑하신 것처럼, 요3:16)입니다.<br><br>

            <span class="subtitle">하우 아지트</span>에서 아동과 청소년들이 하나님이 주신 숨을 맘껏 쉬고, 제 몫을 찾아 즐겁게 살아가며, 정직하고 열정적인 삶으로, 마침내는 하나님나라를 꿈꾸길 소망합니다. <a href="/agit/agit1"> <button class="about__more-btn"> + </button></a><!-- <span class="about_goal"><a href="/agit/agit1">+</a></span> -->
          </div>

        </div>
      </div>

      <div class="hidden-xs">
        <div class="row">
          <div class="col-sm-offset-1 col-sm-5 col-md-offset-1 col-md-5 col-lg-offset-1 col-lg-5">

            <div class="normal-text">
              <br>

              아지트는 어원적으로는 ‘은신처, 근거지’ 등의 의미를 가지는 러시아어 ‘agitpunkt’에서 나온 말로 영어로는 ‘a safe house’, ‘a hiding place’ 등으로 표현할 수 있습니다. 따라서 하우아지트는 다음세대를 살아갈 하늘빛 닮은 우리 아이들 누구에게나 열린 안전한 교육공간입니다.

              아지트는 <span class="intro__vision--emphasized">a</span>s <span class="intro__vision--emphasized">G</span>od love <span class="intro__vision--emphasized">it</span> (하나님이 사랑하신 것처럼, 요3:16)입니다.<br><br>

              <span class="subtitle">하우 아지트</span>에서 아동과 청소년들이 하나님이 주신 숨을 맘껏 쉬고, 제 몫을 찾아 즐겁게 살아가며, 정직하고 열정적인 삶으로, 마침내는 하나님나라를 꿈꾸길 소망합니다. <a href="/agit/agit1"> <button class="about__more-btn"> + </button></a>
            </div>

          </div>

          <div class="col-sm-6 col-md-6 col-lg-6">
            <img
              src="~assets/img/agit1_pc.png"
              class="full-width" >
          </div>
        </div>
      </div>

      <div class="agit__container">
        <div class="page-name">아지트</div>
        <hr class="page-name--bottom-border" >
        <div class="normal-text">
          <div class="edu_title">
          수강신청 및 등록
          </div>

          <ol>
            <li style="margin-left:15px">하우학교 홈페이지 로그인(회원가입 필요)</li>
            <li style="margin-left:15px">홈페이지 <아지트> 메뉴에서 강좌 확인 후 수강신청</li>
            <li style="margin-left:15px">온라인 신청이 어려울 경우 전화 신청 가능</li>
            <li style="margin-left:15px">홈페이지 회원가입 및 입학금(10만원)을 납입한 자는 우선 수강할 수 있음</li>
            <li style="margin-left:15px">기존에 입학금을 납입한 자는 이번 가을학기부터 강좌마다 수강료 납입</li>
            ※ 강좌(8주 단위) 당 수강료는 4만원 <br>
            ※ 교통비, 식비, 재료비, 악기 구입 등 활동 시 발생하는 제반 비용은 본인 부담<br>
            <li style="margin-left:15px">신입 회원은 입학금을 납입한 해당 학기의 모든 강좌를 무료로 수강할 수 있음</li>
            <li style="margin-left:15px">수강신청 후 수강료를 납입하면 수강확정 여부와 일정에 대한 안내를 받게 됨</li>
          </ol> <br>
 
          <b>입학금/수강료 납입계좌</b><br>
          기업은행 504-065625-01-020 하늘빛우리교육공동체<br><br>
 
          <b>문의 </b><br>
          아지트 코디네이터 010-5703-5804<br><br><br>
 
          <div class="edu_title">
          2018가을아지트 일정
          </div>
          08.26~31 수강 신청 <br>
          09.03(월) 개강, 11.03(토) 종강  <br>
          ※ 학기 단위(8주)로 진행하나 학기 구분 없이 진행되는 강좌도 있습니다. <br><br><br>
 
          <div class="edu_title">
          누구나 재능기부를 통해 길잡이교사로 참여할 수 있습니다<br>
          </div>
          하우학교의 비전과 사명선언에 공감하며 ‘숨, 몫, 삶, 꿈’의 핵심가치를 이해하는 분으로 아지트를 찾는 아동과 청소년을 사랑으로 품을 수 있는 분이면 누구나 참여할 수 있습니다.<br>
          ※ 길잡이교사는 매 학기마다 강좌를 개설해 수업을 진행합니다.<br>
        </div>
      </div>


      <div class="agit__container">
        <div class="page-name">강좌소개</div>
        <hr class="page-name--bottom-border" >
      </div>

      <!--  <div class="project__subtitle">
          <div class="project__content">
          </div>
 <div class="container">
      <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 about__title-container">
          <div class="agit__title"><i class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></i> 강좌제목</div>
    </div>
      </div>
    </div> -->

<!--
      <div class="agit__container">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 agit__title_container">
            <div class="agit__subject"><span
              class="glyphicon glyphicon-circle-arrow-right"
              aria-hidden="true"
              style="font-size:15px"/> 강좌제목</div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div
              id="notice_table3"
              style="overflow-x:auto;">
              <table>
                <tr>
                  <th>어학교실</th>
                  <th>문학교실</th>
                  <th>과학교실</th>
                  <th>교양교실</th>
                </tr>
                <tr>
                  <td><a href="#">청소년</a></td>
                  <td><a href="#">문학1</a></td>
                  <td><a href="#">과학1</a></td>
                  <td><a href="#">서예</a></td>
                </tr>
                <tr>
                  <td><a href="#">성인</a></td>
                  <td><a href="#">문학2</a></td>
                  <td><a href="#">과학2</a></td>
                  <td><a href="#">쿠킹</a></td>
                </tr>
              </table>
            </div>
          </div>
          <div>
            <div class="space"/>
          </div>
        </div>
      </div>
-->

      <div class="agit__container">
        <div id="agit__box">
          <div class="row">
            <div class="col-xs-12 col-md-6">
                <div class="col-xs-4"><span class="agit__ftitle">분류</span></div>
                <div class="col-xs-8">
                <q-select v-model="category_filter" :options="categories" />
                </div>
            </div><!--end-->

            <div class="col-xs-12 col-md-6">
                <div class="col-xs-4"><span class="agit__ftitle">대상</span></div>
                <div class="col-xs-8">
                <q-select v-model="age_filter" :options="ages" />
                </div>
            </div><!--end-->

            <div class="col-xs-12 col-md-6">
                <div class="col-xs-4"><span class="agit__ftitle">수강요일</span></div>
                <div class="col-xs-8">
                <q-select v-model="weekday_filter" :options="weekday" />
                </div>
            </div><!--end-->


            <div class="col-xs-12 col-md-6">
              <div class="col-xs-4"><span class="agit__ftitle">키워드</span></div>



              <div class="col-xs-8">
                <q-input v-model="search" placeholder="Search.."/>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div>
      <div class="space"/>
    </div>

    <!--강좌목록-->

<template v-for="item in items">
    <div class="agit__container">
      <div id="box__blue">
        <div class="row">

          <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
            <div id="notice_table5">
              <p align="center"><img
                :src="item.img"
                width="90%"></p>
            </div>
          </div><!--end-->

          <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">
            <div id="notice_table5">
              <table>
                <tr>
                  <td width="17%">강좌명 </td>
                  <td class="agit__ftitle_bl">{{ item.title }}</td>
                </tr>
                <tr>
                  <td>길잡이 교사</td>
                  <td>{{ item.teacher.name }}</td>
                </tr>
                <tr>
                  <td width="15%">대상</td>
                  <td>{{ item.audience }}</td>
                </tr>
                <tr>
                  <td>요일/시간</td>
                  <td>{{ item.time_slot}}</td>
                </tr>
                <tr>
                  <td>기간</td>
                  <td>{{ item.year }}{{ semester_label[item.semester] }}</td>
                </tr>
              </table>
            </div>
          </div><!--end-->

          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div
              class="mg15"
              align="center">
<!--
<a href="class1.html"><button
                type="button"
                class="btn btn-primary">강좌신청하기</button></a>
-->
<q-btn label="강좌보기" @click="$router.push({name:'class1', params:{id:item.id}})" />
</div>
          </div><!--end-->

        </div>
      </div>
    </div>
</template>

  </div>
</div>
</template>

<script>
export default {
  data: function () {
    return {
      semester_label: {
        'spring':'봄',
        'summer':'.5.1 ~ 7.31',
        'fall':'가을',
        'winter':'겨울',
        'year':'.1.1 ~ 12.31',
      },
      weekday_label: {
        'mon':'월',
        'tue':'화',
        'wed':'수',
        'thu':'목',
        'fri':'금',
        'sat':'토',
      },
      age_filter: '',
      ages: [
        {label: '전체', value: ''},
        {label: '1세', value: '1'},
        {label: '2세', value: '2'},
        {label: '3세', value: '3'},
        {label: '4세', value: '4'},
        {label: '5세', value: '5'},
        {label: '6세', value: '6'},
        {label: '7세', value: '7'},
        {label: '8세', value: '8'},
        {label: '9세', value: '9'},
        {label: '10세', value: '10'},
        {label: '11세', value: '11'},
        {label: '12세', value: '12'},
        {label: '13세', value: '13'},
        {label: '14세', value: '14'},
        {label: '15세', value: '15'},
        {label: '16세', value: '16'},
        {label: '17세', value: '17'},
        {label: '18세', value: '18'},
        {label: '19세', value: '19'},
        {label: '20세', value: '20'},
        {label: '성인', value: 'adult'},
      ],
      weekday_filter: '',
      weekday: [
        {label: '전체', value: ''},
        {label: '월', value: 'mon'},
        {label: '화', value: 'tue'},
        {label: '수', value: 'wed'},
        {label: '목', value: 'thu'},
        {label: '금', value: 'fri'},
        {label: '토', value: 'sat'},
      ],
      category_filter: '',
      categories: [
        {label: '전체', value: ''},
        {label: '숨', value: 'breath'},
        {label: '몫', value: 'role'},
        {label: '삶', value: 'life'},
        {label: '꿈', value: 'dream'},
      ],
      search: '',
      items: [],
      all_items: []
    }
  },
  methods: {
    apply_filter: function() {
      this.items = []
      for (let i = 0; i < this.all_items.length; i++) {
        if (this.category_filter != '' &&
            this.all_items[i].minor_category != this.category_filter)
          continue
           
        if (this.age_filter != '' &&
            !this.all_items[i].audience_array.includes(this.age_filter))
          continue
           
        if (this.weekday_filter != '' &&
            this.all_items[i].weekday != this.weekday_filter)
          continue
           
        if (this.search != '' &&
            !this.all_items[i].title.includes(this.search))
          continue
           
        this.items.push(this.all_items[i])
      }
    },
  },
  watch: {
    'category_filter': function (val) {
      this.apply_filter()
    },
    'age_filter': function (val) {
      this.apply_filter()
    },
    'weekday_filter': function (val) {
      this.apply_filter()
    },
    'search': function (val) {
      this.apply_filter()
    },
  },
  created: function() {
      let query = {}
      query['major_category'] = 'agit'
      var self = this
      self.$axios.get('classes', {params: query})
        .then(function (response) {
          let data = response.data
          self.all_items = data
          let age_label = {}
          for (let i = 1; i < 21; i++) {
            age_label[i.toString()] = i.toString() + '세'
          }
          age_label['adult'] = '성인'
          for (let i = 0; i < self.all_items.length; i++ ) {
            self.all_items[i].img = "/assets/img/" + self.all_items[i].subject_code + ".jpg"
            let ts_arr = self.all_items[i].time_slot.split(',')
console.log(ts_arr)
            self.all_items[i].weekday = ts_arr[0]
            self.all_items[i].time_slot = self.weekday_label[ts_arr[0]] + ' ' + ts_arr[1]
            let aud_arr = JSON.parse(self.all_items[i].audience)
            self.all_items[i].audience_array = aud_arr
            self.all_items[i].audience = ''
console.log(aud_arr)
            for (var j = 1; j < 21; j++) {
              if (aud_arr.includes(j.toString())) {
                self.all_items[i].audience = j.toString()
                j++
                break
              }
            }
            for (; j < 21; j++) {
              if (aud_arr.includes(j.toString())) {
                self.all_items[i].audience = self.all_items[i].audience + ', ' + j.toString()
              }
            }
            if (self.all_items[i].audience != '') {
              self.all_items[i].audience = self.all_items[i].audience + '세'
            }
            if (aud_arr.includes('adult')) {
              if (self.all_items[i].audience != '') {
                self.all_items[i].audience = self.all_items[i].audience + ', '
              }
              self.all_items[i].audience = self.all_items[i].audience + '성인'
            }
          }
          self.apply_filter()
        })
  },
}
</script>

<style>
* {
  box-sizing: border-box;
}
/* Style the search field */
form.example input[type=text] {
  padding: 7px;
  font-size: 15px;
  border: 2px solid #eee;
  float: left;
  width: 100%;
  background: #f1f1f1;
}
/* Clear floats */
form.example::after {
  content: "";
  clear: both;
  display: table;
}
</style>
